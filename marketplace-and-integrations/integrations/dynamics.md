---
description: >-
  Details an integration available for Dynamics, built and maintained by Umbraco HQ.
---

# Dynamics Integration

This integration provides a form picker and rendering component for forms managed within a Microsoft Dynamics 365 Marketing instance.

Install from NuGet via:
https://www.nuget.org/packages/Umbraco.Cms.Integrations.Crm.Dynamics

Source code is at:
https://github.com/umbraco/Umbraco.Cms.Integrations/tree/main/src/Umbraco.Cms.Integrations.Crm.Dynamics

Available on the Umbraco Marketplace at:
https://marketplace.umbraco.com/package/umbraco.cms.integrations.crm.dynamics

## Prerequisites

Required minimum versions of Umbraco CMS:
- 8.4.0 for version 8
- 9.0.1 for version 9
- 10.1.0 for version 10

## How To Use

### Authentication

The package uses the OAuth protocol for authentication.

### Additional Configuration

To connect to your Dynamics 365 instance, the following configuration is required:

For Umbraco 8:

```xml
  <appSettings>
    ...
    <add key="Umbraco.Cms.Integrations.Crm.Dynamics.HostUrl" value="https://[INSTANCE]/api.crm4.dynamics.com/" />
    <add key="Umbraco.Cms.Integrations.Crm.Dynamics.ApiPath" value="api/data/v9.2/" />
    ...
  </appSettings>
```

For Umbraco 9+:

```json
  "Umbraco": {
    "Integrations": {
        "Crm": {
          "Dynamics": {
            "Settings": {
              "HostUrl": "https://[INSTANCE].crm4.dynamics.com/",
              "ApiPath": "api/data/v9.2/"
            }
          }
        }
      }
    }
```

The above settings are for demonstration purpose, they might change depending on your personalized instance Web API.

### Backoffice usage

To use the form picker, a new datatype should be created based on the Dynamics Form Picker property editor.

The settings in `Web.config` will be used for sending authorization and data requests to the Dynamics API, through the _0Auth Proxy for Umbraco Integrations_ or directly.

The _Connect_ button prompts the user with the Microsoft authorization window, which after a successfully authentication will send the authorization code back.
The retrieved access token will be saved into the database and used for future requests.

_Revoke_ action will remove the access token from the database and the authorization process will need to be repeated.

### Front-end rendering

A strongly typed model will be generated by the property value converter. An HTML helper is available to render the form on the front-end.

Ensure your template has a reference to the following using statement:

```csharp
@using Umbraco.Cms.Integrations.Crm.Dynamics.Helpers;
```

And render the form using (assuming a property based on the created datatype, with alias `dynamicsForm` has been created):

```csharp
@Html.RenderDynamicsForm(Model.DynamicsForm)
```

The selected form is embedded either through an _iframe_, or by using scripts.
